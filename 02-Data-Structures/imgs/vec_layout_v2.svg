<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="450" viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
  <!-- Background -->
  <rect width="800" height="450" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="400" y="35" font-family="JetBrains Mono, monospace" font-size="22" font-weight="bold" text-anchor="middle" fill="#333333">Vec&lt;u8&gt; 标准内存布局 (64-bit)</text>

  <!-- Main Container -->
  <g transform="translate(40, 70)">
    <rect x="-10" y="-5" width="720" height="300" rx="15" fill="#fff" stroke="#e0e0e0" stroke-width="1.5" />

    <!-- Left Column: Stack -->
    <g transform="translate(20, 20)">
      <rect width="300" height="240" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="300" height="35" rx="12" fill="#e3f2fd" />
      <rect y="20" width="300" height="15" fill="#e3f2fd" />
      <text x="150" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#1565c0" text-anchor="middle">Stack (内存栈)</text>
      
      <!-- Vec Struct -->
      <g transform="translate(15, 55)">
        <rect width="270" height="160" rx="8" fill="#ffffff" stroke="#2196f3" stroke-width="2"/>
        <text x="10" y="-8" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#1565c0">Vec&lt;u8&gt; 结构体</text>

        <!-- ptr field -->
        <g transform="translate(10, 15)">
          <rect width="250" height="40" fill="#fff8e1" stroke="#ff9800" rx="4"/>
          <text x="10" y="25" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#546e7a">ptr</text>
          <text x="240" y="25" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#f57c00" text-anchor="end">0x55aa</text>
        </g>
        
        <!-- cap field -->
        <g transform="translate(10, 65)">
          <rect width="250" height="40" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
          <text x="10" y="25" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">cap</text>
          <text x="240" y="25" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#333333" text-anchor="end">4</text>
        </g>
        
        <!-- len field -->
        <g transform="translate(10, 115)">
          <rect width="250" height="40" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
          <text x="10" y="25" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">len</text>
          <text x="240" y="25" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#333333" text-anchor="end">2</text>
        </g>
      </g>
      
      <!-- Size Bracket -->
      <g transform="translate(290, 55)">
        <path d="M 0,0 L 10,0 M 5,0 L 5,160 M 0,160 L 10,160" stroke="#90a4ae" stroke-width="1.5" fill="none" />
        <text x="18" y="80" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#546e7a" transform="rotate(90, 18, 80)" text-anchor="middle">24 Bytes</text>
      </g>
    </g>

    <!-- Right Column: Heap -->
    <g transform="translate(380, 20)">
      <rect width="320" height="150" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="320" height="35" rx="12" fill="#e8f5e9" />
      <rect y="20" width="320" height="15" fill="#e8f5e9" />
      <text x="160" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#2e7d32" text-anchor="middle">Heap (堆内存数据)</text>
      
      <g transform="translate(20, 60)">
        <!-- Heap Elements -->
        <g transform="translate(0, 0)">
          <rect width="60" height="60" fill="#fff" stroke="#4caf50" stroke-width="2" rx="4" />
          <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">10</text>
          <text x="30" y="75" font-family="JetBrains Mono, monospace" font-size="9" fill="#9e9e9e" text-anchor="middle">0x55aa</text>
        </g>
        
        <g transform="translate(70, 0)">
          <rect width="60" height="60" fill="#fff" stroke="#4caf50" stroke-width="2" rx="4" />
          <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">20</text>
          <text x="30" y="75" font-family="JetBrains Mono, monospace" font-size="9" fill="#9e9e9e" text-anchor="middle">0x55ab</text>
        </g>
        
        <g transform="translate(140, 0)">
          <rect width="60" height="60" fill="#f5f5f5" stroke="#bdbdbd" stroke-dasharray="4 2" rx="4" />
          <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="10" fill="#78909c" text-anchor="middle">uninit</text>
        </g>
        
        <g transform="translate(210, 0)">
          <rect width="60" height="60" fill="#f5f5f5" stroke="#bdbdbd" stroke-dasharray="4 2" rx="4" />
          <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="10" fill="#78909c" text-anchor="middle">uninit</text>
        </g>
      </g>
    </g>

    <!-- Logic Description (Legacy box removed for bottom consistency) -->

    <!-- Pointers and Connections -->
    <defs>
      <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
        <path d="M0,0 L10,5 L0,10 Z" fill="#ff9800" />
      </marker>
    </defs>
    
    <!-- Stack to Heap -->
    <circle cx="275" cy="95" r="3" fill="#ff9800" />
    <path d="M 275,95 C 330,95 350,130 395,130" fill="none" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)" />
  </g>

  <!-- Summary Note -->
  <rect x="200" y="400" width="400" height="30" rx="15" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
  <text x="400" y="420" font-family="JetBrains Mono, monospace" font-size="11" fill="#78909c" text-anchor="middle">只要 len &lt; cap，堆空间就有闲置位置容纳新元素</text>
</svg>
