<?xml version="1.0" encoding="UTF-8"?>
<svg width="850" height="550" viewBox="0 0 850 550" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
  <rect width="850" height="550" fill="#f8f9fa" />
  <text x="425" y="35" font-family="JetBrains Mono, monospace" font-size="22" font-weight="bold" text-anchor="middle" fill="#333333">从 Vec 到 Slice: 零成本抽象</text>
  <defs>
    <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#ff9800" />
    </marker>
    <marker id="arrow-purple" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#9c27b0" />
    </marker>
  </defs>
  <!-- Stack Container -->
  <g transform="translate(40, 70)">
    <rect x="0" y="0" width="300" height="420" rx="15" fill="#ffffff" stroke="#e0e0e0" stroke-width="1.5" />
    <rect x="0" y="0" width="300" height="35" rx="12" fill="#e3f2fd" />
    <rect x="0" y="20" width="300" height="15" fill="#e3f2fd" />
    <text x="150" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#1565c0" text-anchor="middle">Stack (栈)</text>
    <!-- Vec<T> -->
    <g transform="translate(25, 50)">
      <rect width="250" height="150" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="250" height="30" rx="12" fill="#e3f2fd" />
      <rect y="15" width="250" height="15" fill="#e3f2fd" />
      <text x="125" y="20" font-family="JetBrains Mono, monospace" font-size="12" font-weight="bold" fill="#1565c0" text-anchor="middle">Vec&lt;T&gt; (24 Bytes)</text>
      <g transform="translate(15, 40)">
        <rect width="220" height="100" rx="8" fill="#ffffff" stroke="#2196f3" stroke-width="1.5"/>
        <!-- ptr field -->
        <g transform="translate(10, 10)">
          <rect width="200" height="25" fill="#fff8e1" stroke="#ff9800" rx="4"/>
          <text x="10" y="17" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#546e7a">ptr</text>
          <text x="190" y="17" font-family="JetBrains Mono, monospace" font-size="10" font-weight="bold" fill="#f57c00" text-anchor="end">0x55aa</text>
        </g>
        <!-- cap field -->
        <g transform="translate(10, 40)">
          <rect width="200" height="25" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
          <text x="10" y="17" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">cap</text>
          <text x="190" y="17" font-family="JetBrains Mono, monospace" font-size="10" font-weight="bold" fill="#333" text-anchor="end">4</text>
        </g>
        <!-- len field -->
        <g transform="translate(10, 70)">
          <rect width="200" height="25" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
          <text x="10" y="17" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">len</text>
          <text x="190" y="17" font-family="JetBrains Mono, monospace" font-size="10" font-weight="bold" fill="#333" text-anchor="end">3</text>
        </g>
      </g>
    </g>
    <!-- Transition Arrow -->
    <path d="M 150,205 L 150,242" fill="none" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrow-purple)" />
    <text x="160" y="228" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#6a1b9a" text-anchor="start">解构</text>
    <!-- Slice &[T] -->
    <g transform="translate(25, 250)">
      <rect width="250" height="140" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="250" height="30" rx="12" fill="#f3e5f5" />
      <rect y="15" width="250" height="15" fill="#f3e5f5" />
      <text x="125" y="20" font-family="JetBrains Mono, monospace" font-size="12" font-weight="bold" fill="#6a1b9a" text-anchor="middle">&amp;[T] (16 Bytes)</text>
      <g transform="translate(15, 40)">
        <rect width="220" height="70" rx="8" fill="#ffffff" stroke="#9c27b0" stroke-width="1.5"/>
        <!-- ptr field -->
        <g transform="translate(10, 10)">
          <rect width="200" height="25" fill="#fff8e1" stroke="#ff9800" rx="4"/>
          <text x="10" y="17" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#546e7a">ptr</text>
          <text x="190" y="17" font-family="JetBrains Mono, monospace" font-size="10" font-weight="bold" fill="#f57c00" text-anchor="end">0x55aa</text>
        </g>
        <!-- len field -->
        <g transform="translate(10, 40)">
          <rect width="200" height="25" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
          <text x="10" y="17" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">len</text>
          <text x="190" y="17" font-family="JetBrains Mono, monospace" font-size="10" font-weight="bold" fill="#333" text-anchor="end">3</text>
        </g>
      </g>
      <text x="125" y="130" font-family="JetBrains Mono, monospace" font-size="10" fill="#9c27b0" text-anchor="middle" font-weight="bold">胖指针 (Fat Pointer)</text>
    </g>
  </g>
  <!-- Heap Container -->
  <g transform="translate(450, 205)">
    <rect width="360" height="150" rx="15" fill="#ffffff" stroke="#e0e0e0" stroke-width="1.5" />
    <rect width="360" height="35" rx="12" fill="#e8f5e9" />
    <rect y="20" width="360" height="15" fill="#e8f5e9" />
    <text x="180" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#2e7d32" text-anchor="middle">Heap (堆内存数据)</text>
    <g transform="translate(20, 60)">
      <!-- Element 1 -->
      <g transform="translate(0, 0)">
        <rect width="60" height="60" fill="#fff" stroke="#4caf50" stroke-width="2" rx="4" />
        <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">1</text>
        <text x="30" y="75" font-family="JetBrains Mono, monospace" font-size="9" fill="#9e9e9e" text-anchor="middle">0x55aa</text>
      </g>
      <!-- Element 2 -->
      <g transform="translate(70, 0)">
        <rect width="60" height="60" fill="#fff" stroke="#4caf50" stroke-width="2" rx="4" />
        <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">2</text>
        <text x="30" y="75" font-family="JetBrains Mono, monospace" font-size="9" fill="#9e9e9e" text-anchor="middle">0x55ab</text>
      </g>
      <!-- Element 3 -->
      <g transform="translate(140, 0)">
        <rect width="60" height="60" fill="#fff" stroke="#4caf50" stroke-width="2" rx="4" />
        <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">3</text>
        <text x="30" y="75" font-family="JetBrains Mono, monospace" font-size="9" fill="#9e9e9e" text-anchor="middle">0x55ac</text>
      </g>
      <!-- Uninit -->
      <g transform="translate(210, 0)">
        <rect width="60" height="60" fill="#f5f5f5" stroke="#bdbdbd" stroke-dasharray="4 2" rx="4" />
        <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="10" fill="#78909c" text-anchor="middle">uninit</text>
      </g>
      <!-- Dots -->
      <g transform="translate(280, 0)">
        <text x="30" y="35" font-family="JetBrains Mono, monospace" font-size="16" font-weight="bold" fill="#bdbdbd" text-anchor="middle">...</text>
      </g>
    </g>
  </g>
  <!-- Pointer Arrows -->
  <path d="M 290,182.5 C 360,182.5 400,295 475,295" fill="none" stroke="#ff9800" stroke-width="1.5" stroke-dasharray="4 2" marker-end="url(#arrow-orange)" />
  <circle cx="290" cy="182.5" r="3" fill="#ff9800" />
  <path d="M 290,382.5 C 360,382.5 400,295 475,295" fill="none" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)" />
  <circle cx="290" cy="382.5" r="3" fill="#ff9800" />
  <!-- Summary Note -->
  <rect x="225" y="505" width="400" height="30" rx="15" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
  <text x="425" y="525" font-family="JetBrains Mono, monospace" font-size="11" fill="#78909c" text-anchor="middle">切片丢弃了 cap 信息，与 Vec 共享相同的堆空间</text>
</svg>
