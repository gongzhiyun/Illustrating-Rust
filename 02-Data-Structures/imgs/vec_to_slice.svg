<?xml version="1.0" encoding="UTF-8"?>
<svg width="850" height="380" viewBox="0 0 850 380" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
  <!-- Background -->
  <rect width="850" height="380" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="425" y="35" font-family="JetBrains Mono, monospace" font-size="22" font-weight="bold" text-anchor="middle" fill="#333333">从 Vec 到 Slice: 零成本抽象</text>

  <!-- Main Container -->
  <g transform="translate(30, 70)">
    <rect x="-10" y="-5" width="800" height="280" rx="15" fill="#fff" stroke="#e0e0e0" stroke-width="1.5" />

    <!-- Vec on Stack -->
    <g transform="translate(20, 20)">
      <rect width="220" height="200" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="220" height="35" rx="12" fill="#e3f2fd" />
      <rect y="20" width="220" height="15" fill="#e3f2fd" />
      <text x="110" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#1565c0" text-anchor="middle">Vec&lt;T&gt; (24 Bytes)</text>
      
      <g transform="translate(15, 50)">
        <rect width="190" height="130" rx="8" fill="#ffffff" stroke="#2196f3" stroke-width="1.5"/>
        <rect x="5" y="10" width="180" height="35" fill="#fff8e1" stroke="#ff9800" rx="4"/>
        <text x="15" y="32" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#546e7a">ptr</text>
        <rect x="5" y="50" width="180" height="35" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
        <text x="15" y="72" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">cap</text>
        <rect x="5" y="90" width="180" height="35" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
        <text x="15" y="112" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">len</text>
      </g>
    </g>

    <!-- Slice (&[T]) on Stack -->
    <g transform="translate(280, 20)">
      <rect width="220" height="160" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="220" height="35" rx="12" fill="#f3e5f5" />
      <rect y="20" width="220" height="15" fill="#f3e5f5" />
      <text x="110" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#6a1b9a" text-anchor="middle">&amp;[T] (16 Bytes)</text>
      
      <g transform="translate(15, 50)">
        <rect width="190" height="90" rx="8" fill="#ffffff" stroke="#9c27b0" stroke-width="1.5"/>
        <rect x="5" y="10" width="180" height="30" fill="#fff8e1" stroke="#ff9800" rx="4"/>
        <text x="15" y="29" font-family="JetBrains Mono, monospace" font-size="11" font-weight="bold" fill="#546e7a">ptr</text>
        <rect x="5" y="45" width="180" height="30" fill="#ffffff" stroke="#e0e0e0" rx="4"/>
        <text x="15" y="64" font-family="JetBrains Mono, monospace" font-size="11" fill="#546e7a">len</text>
      </g>
      <text x="110" y="155" font-family="JetBrains Mono, monospace" font-size="10" fill="#9c27b0" text-anchor="middle" font-weight="bold">胖指针 (Fat Pointer)</text>
    </g>

    <!-- Heap Section -->
    <g transform="translate(540, 20)">
      <rect width="240" height="120" rx="12" fill="#ffffff" stroke="#e0e0e0" stroke-width="1" />
      <rect width="240" height="35" rx="12" fill="#e8f5e9" />
      <rect y="20" width="240" height="15" fill="#e8f5e9" />
      <text x="120" y="22" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#2e7d32" text-anchor="middle">Heap (堆内存数据)</text>
      
      <g transform="translate(20, 50)">
        <rect width="200" height="50" fill="#fff" stroke="#4caf50" stroke-width="2" rx="4" />
        <text x="100" y="30" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold" fill="#333" text-anchor="middle">[ 1, 2, 3, ... ]</text>
      </g>
    </g>

    <!-- Transition Arrow -->
    <path d="M 235,110 L 275,110" fill="none" stroke="#9c27b0" stroke-width="2" marker-end="url(#arrow-purple)" />
    <text x="255" y="100" font-family="JetBrains Mono, monospace" font-size="9" font-weight="bold" fill="#6a1b9a" text-anchor="middle">解构</text>

    <!-- Pointer Arrows -->
    <defs>
      <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
        <path d="M0,0 L10,5 L0,10 Z" fill="#ff9800" />
      </marker>
      <marker id="arrow-purple" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
        <path d="M0,0 L10,5 L0,10 Z" fill="#9c27b0" />
      </marker>
    </defs>
    
    <!-- From Vec ptr to Heap -->
    <circle cx="210" cy="85" r="3" fill="#ff9800" />
    <path d="M 210,85 C 350,85 450,95 535,95" fill="none" stroke="#ff9800" stroke-width="1.5" stroke-dasharray="2 2" marker-end="url(#arrow-orange)" />
    
    <!-- From Slice ptr to Heap -->
    <circle cx="470" cy="85" r="3" fill="#ff9800" />
    <path d="M 470,85 C 500,85 510,95 535,95" fill="none" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)" />
  </g>

  <!-- Summary Note -->
  <text x="425" y="340" font-family="JetBrains Mono, monospace" font-size="11" fill="#78909c" text-anchor="middle">切片只是丢弃了 cap 信息的胖指针，与 Vec 共享相同的堆空间</text>
</svg>
