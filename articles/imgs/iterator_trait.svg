<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" viewBox="0 0 800 400" fill="none" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
  <rect width="800" height="400" fill="#f8f9fa"/>
  <!-- Trait Definition Box -->
  <rect x="50" y="50" width="300" height="150" rx="8" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2"/>
  <text x="70" y="85" fill="#333333" font-family="JetBrains Mono, monospace" font-size="18" font-weight="bold">trait Iterator {</text>
  <text x="90" y="115" fill="#78909c" font-family="JetBrains Mono, monospace" font-size="14">    type Item;</text>
  <text x="90" y="145" fill="#333333" font-family="JetBrains Mono, monospace" font-size="14">    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;</text>
  <text x="70" y="175" fill="#333333" font-family="JetBrains Mono, monospace" font-size="18" font-weight="bold">}</text>
  <!-- Data Stream -->
  <rect x="450" y="80" width="300" height="60" rx="4" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <line x1="525" y1="80" x2="525" y2="140" stroke="#2196f3" stroke-width="1"/>
  <line x1="600" y1="80" x2="600" y2="140" stroke="#2196f3" stroke-width="1"/>
  <line x1="675" y1="80" x2="675" y2="140" stroke="#2196f3" stroke-width="1"/>
  <text x="475" y="115" fill="#333333" font-family="JetBrains Mono, monospace" font-size="16">V[0]</text>
  <text x="550" y="115" fill="#333333" font-family="JetBrains Mono, monospace" font-size="16">V[1]</text>
  <text x="625" y="115" fill="#333333" font-family="JetBrains Mono, monospace" font-size="16">V[2]</text>
  <text x="705" y="115" fill="#333333" font-family="JetBrains Mono, monospace" font-size="16">...</text>
  <!-- Cursor/Pointer -->
  <path d="M 487 200 L 487 150" stroke="#ff9800" stroke-width="3" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ff9800"/>
    </marker>
  </defs>
  <rect x="430" y="210" width="120" height="40" rx="4" fill="#fff8e1" stroke="#ff9800" stroke-width="2"/>
  <text x="445" y="235" fill="#333333" font-family="JetBrains Mono, monospace" font-size="14" font-weight="bold">next() 调用</text>
  <!-- Logic Flow -->
  <path d="M 350 125 Q 400 125 430 125" stroke="#9c27b0" stroke-width="2" stroke-dasharray="4 2" marker-end="url(#purplearrow)"/>
  <defs>
    <marker id="purplearrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9c27b0"/>
    </marker>
  </defs>
  <text x="360" y="110" fill="#9c27b0" font-family="JetBrains Mono, monospace" font-size="12">状态驱动获取</text>
  <!-- Return Value -->
  <rect x="580" y="280" width="180" height="50" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
  <text x="600" y="310" fill="#333333" font-family="JetBrains Mono, monospace" font-size="16">Some(Item)</text>
  <path d="M 525 140 Q 525 280 580 305" stroke="#4caf50" stroke-width="2" stroke-dasharray="4 2" marker-end="url(#greenarrow)"/>
  <defs>
    <marker id="greenarrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50"/>
    </marker>
  </defs>
  <!-- Annotation -->
  <text x="50" y="280" fill="#78909c" font-family="JetBrains Mono, monospace" font-size="14">1. 迭代器持有当前位置状态</text>
  <text x="50" y="310" fill="#78909c" font-family="JetBrains Mono, monospace" font-size="14">2. 每次 next() 返回一个 Option</text>
  <text x="50" y="340" fill="#78909c" font-family="JetBrains Mono, monospace" font-size="14">3. 内部指针（Cursor）向前移动</text>
</svg>
